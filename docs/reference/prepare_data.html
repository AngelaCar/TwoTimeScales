<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="prepare_data() prepares the raw individual time-to-event data
for hazard estimation in 1d or 2d.
Given the raw data, this function first constructs the bins over one or two
time axes and then computes the aggregated (or individual)
vectors or matrices of exposure times and events indicators. A data.frame with
covariates values can be provided by the user."><title>Prepare raw data by binning them in 1d or 2d — prepare_data • TwoTimeScales</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare raw data by binning them in 1d or 2d — prepare_data"><meta property="og:description" content="prepare_data() prepares the raw individual time-to-event data
for hazard estimation in 1d or 2d.
Given the raw data, this function first constructs the bins over one or two
time axes and then computes the aggregated (or individual)
vectors or matrices of exposure times and events indicators. A data.frame with
covariates values can be provided by the user."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">TwoTimeScales</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Vignettes</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/AngelaCar/TwoTimeScales">
    <span class="fa fa-github fa-lg fab"></span>
     
    github
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Prepare raw data by binning them in 1d or 2d</h1>
      <small class="dont-index">Source: <a href="https://github.com/AngelaCar/TwoTimeScales/blob/HEAD/R/prepare_data.R" class="external-link"><code>R/prepare_data.R</code></a></small>
      <div class="d-none name"><code>prepare_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>prepare_data()</code> prepares the raw individual time-to-event data
for hazard estimation in 1d or 2d.</p>
<p>Given the raw data, this function first constructs the bins over one or two
time axes and then computes the aggregated (or individual)
vectors or matrices of exposure times and events indicators. A data.frame with
covariates values can be provided by the user.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_data</span><span class="op">(</span></span>
<span>  t_in <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  t_out <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  u <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  s_in <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">s_out</span>,</span>
<span>  <span class="va">events</span>,</span>
<span>  min_t <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_t <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_u <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_u <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_s <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_s <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  du <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">ds</span>,</span>
<span>  individual <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  covs <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>t_in</dt>
<dd><p>(optional) A vector of entry times on the time scale <code>t</code>.</p></dd>


<dt>t_out</dt>
<dd><p>(optional) A vector of exit times on the time scale <code>t</code>.</p></dd>


<dt>u</dt>
<dd><p>(optional) A vector of fixed-times at entry in the process.</p></dd>


<dt>s_in</dt>
<dd><p>(optional) A vector of entry times on the time scale <code>s</code>.</p></dd>


<dt>s_out</dt>
<dd><p>A vector of exit times on the time scale <code>s</code>.</p></dd>


<dt>events</dt>
<dd><p>A vector of event's indicators (possible values 0/1).</p></dd>


<dt>min_t</dt>
<dd><p>(optional) A minimum value for the bins over <code>t</code>.
If <code>NULL</code>, the minimum of <code>t_in</code> will be used.</p></dd>


<dt>max_t</dt>
<dd><p>(optional) A maximum value for the bins over <code>t</code>.
If <code>NULL</code>, the maximum of <code>t_out</code> will be used.</p></dd>


<dt>min_u</dt>
<dd><p>(optional) A minimum value for the bins over <code>u</code>.
If <code>NULL</code>, the minimum of <code>u</code> will be used.</p></dd>


<dt>max_u</dt>
<dd><p>(optional) A maximum value for the bins over <code>u</code>.
If <code>NULL</code>, the maximum of <code>u</code> will be used.</p></dd>


<dt>min_s</dt>
<dd><p>(optional) A minimum value for the bins over <code>s</code>.
If <code>NULL</code>, the minimum of <code>s_in</code> will be used.</p></dd>


<dt>max_s</dt>
<dd><p>(optional) A maximum value for the bins over <code>s</code>.
If <code>NULL</code>, the maximum of <code>s_out</code> will be used.</p></dd>


<dt>dt</dt>
<dd><p>(optional) A scalar giving the length of the intervals on the <code>t</code> time scale.</p></dd>


<dt>du</dt>
<dd><p>(optional) A scalar giving the length of the intervals on the <code>u</code> axis.</p></dd>


<dt>ds</dt>
<dd><p>A scalar giving the length of the intervals on the <code>s</code> time scale.</p></dd>


<dt>individual</dt>
<dd><p>A Boolean. Default is <code>FALSE</code>: if <code>FALSE</code> computes the matrices <code>R</code> and <code>Y</code>
collectively for all observations; if <code>TRUE</code> computes the matrices <code>R</code> and <code>Y</code> separately for each individual record.</p></dd>


<dt>covs</dt>
<dd><p>A data.frame with the variables to be used as covariates.
The function will create dummy variables for any factor variable passed as argument in <code>covs</code>.
If a variable of class character is passed as argument, it will be converted to factor.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with the following elements:</p><ul><li><p><code>bins</code> a list:</p><ul><li><p><code>bins_t</code> if <code>t_out</code> is provided, this is a vector of bins extremes for the time scale <code>t</code>.</p></li>
<li><p><code>mid_t</code> if <code>t_out</code> is provided, this is a vector with the midpoints of the bins over <code>t</code>.</p></li>
<li><p><code>nt</code> if <code>t_out</code> is provided, this is the number of bins over <code>t</code>.</p></li>
<li><p><code>bins_u</code> if <code>u</code> is provided, this is a vector of bins extremes for <code>u</code> axis.</p></li>
<li><p><code>midu</code> if <code>u</code> is provided, this is a vector with the midpoints of the bins over <code>u</code>.</p></li>
<li><p><code>nu</code> if <code>u</code> is provided, this is the number of bins over <code>u</code>.</p></li>
<li><p><code>bins_s</code> is a vector of bins extremes for the time scale <code>s</code>.</p></li>
<li><p><code>mids</code> is a vector with the midpoints of the bins over <code>s</code>.</p></li>
<li><p><code>ns</code> is the number of bins over <code>s</code>.</p></li>
</ul></li>
<li><p><code>bindata</code>:</p><ul><li><p><code>r</code> or <code>R</code> an array of exposure times: if binning the data over
one time scale only this is a vector.
If binning the data over two time scales and if <code>individual == TRUE</code>
then <code>R</code> is an array of dimension nu by ns by n, otherwise it is an
array of dimension nu by ns</p></li>
<li><p><code>y</code> or <code>Y</code> an array of event counts: if binning the data over one time
scale only this is a vector.
If binning the data over two time scales and if <code>individual == TRUE</code>
then <code>Y</code> is an array of dimension nu by ns by n, otherwise it is an
array of dimension nu by ns</p></li>
<li><p><code>Z</code> A matrix of covariates' values to be used in the model,
of dimension n by p</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Angela Carollo <a href="mailto:carollo@demogr.mpg.de">carollo@demogr.mpg.de</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bin data over s = time since recurrence only, with intervals of length 30 days</span></span></span>
<span class="r-in"><span><span class="co"># aggregated data (no covariates)</span></span></span>
<span class="r-in"><span><span class="va">binned_data</span> <span class="op">&lt;-</span> <span class="fu">prepare_data</span><span class="op">(</span>s_out <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">timesr</span>, events <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">status</span>, ds <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `s_in = NULL`. I will use `s_in = 0` for all observations.</span>
<span class="r-in"><span><span class="co"># Visualize vector of event counts</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">binned_data</span><span class="op">$</span><span class="va">bindata</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 14 24 16 11 24 22 20 10 24 26 13 19 10  9 11 11 10 10  9 13 10  7 10  7  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26]  4  7  5  8  4  1  2  5  5  5  0  0  1  1  1  1  1  1  0  0  0  1  2  1  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [51]  0  1  0  0  0  2  1  0  1  0  1  0  0  0  1  0  0  0  0  0  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [76]  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0</span>
<span class="r-in"><span><span class="co"># Visualize midpoints of the bins</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">binned_data</span><span class="op">$</span><span class="va">bins</span><span class="op">$</span><span class="va">mids</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]   15   45   75  105  135  165  195  225  255  285  315  345  375  405  435</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16]  465  495  525  555  585  615  645  675  705  735  765  795  825  855  885</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31]  915  945  975 1005 1035 1065 1095 1125 1155 1185 1215 1245 1275 1305 1335</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [46] 1365 1395 1425 1455 1485 1515 1545 1575 1605 1635 1665 1695 1725 1755 1785</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61] 1815 1845 1875 1905 1935 1965 1995 2025 2055 2085 2115 2145 2175 2205 2235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [76] 2265 2295 2325 2355 2385 2415 2445 2475 2505 2535 2565 2595 2625 2655 2685</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [91] 2715</span>
<span class="r-in"><span><span class="co"># Visualize number of bins</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">binned_data</span><span class="op">$</span><span class="va">bins</span><span class="op">$</span><span class="va">ns</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 91</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Now using ds = .3 and the same variable measured in years</span></span></span>
<span class="r-in"><span><span class="va">binned_data</span> <span class="op">&lt;-</span> <span class="fu">prepare_data</span><span class="op">(</span>s_out <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">timesr_y</span>, events <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">status</span>, ds <span class="op">=</span> <span class="fl">.3</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `s_in = NULL`. I will use `s_in = 0` for all observations.</span>
<span class="r-in"><span><span class="co"># Visualize vector of exposure timess</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">binned_data</span><span class="op">$</span><span class="va">bindata</span><span class="op">$</span><span class="va">r</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 128.9234086 108.6935661  86.6990418  67.7699521  55.8161533  43.9006160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7]  33.6388090  26.2145791  20.8121150  16.9198494  14.2230664  12.1813142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13]  11.2851472  10.0655715   9.0108145   7.7641342   6.0433949   4.7993155</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19]   2.9854209   2.0730322   1.2588638   0.9572895   0.8856947   0.3787817</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25]   0.2606434</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bin data over u = time at recurrence and s = time since recurrence, measured in days</span></span></span>
<span class="r-in"><span><span class="co"># aggregated data (no covariates)</span></span></span>
<span class="r-in"><span><span class="co"># Note that if we do not provide du this is taken to be equal to ds</span></span></span>
<span class="r-in"><span><span class="va">binned_data</span> <span class="op">&lt;-</span> <span class="fu">prepare_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  u <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">timer</span>, s_out <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">timesr</span>,</span></span>
<span class="r-in"><span>  events <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">status</span>, ds <span class="op">=</span> <span class="fl">30</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `s_in = NULL`. I will use `s_in = 0` for all observations.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `s_in = NULL`. I will use `s_in = 0` for all observations.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Visualize matrix of event counts</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">binned_data</span><span class="op">$</span><span class="va">bindata</span><span class="op">$</span><span class="va">Y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]    1    0    0    0    1    0    0    0    0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]    1    2    3    0    0    0    0    0    1     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]    0    5    1    0    2    2    1    0    2     2     0     2     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]    1    4    0    1    1    3    2    1    3     0     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]    1    1    2    1    1    1    1    0    0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]    2    1    2    1    1    2    1    0    2     4     2     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]    1    0    1    1    1    1    2    0    2     2     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]    1    3    0    0    1    2    3    0    1     1     0     5     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]    1    1    1    0    1    2    0    0    0     0     2     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]    2    0    0    1    2    0    1    1    2     2     2     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]     2     0     0     0     0     0     0     1     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]     1     0     0     0     1     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]     0     0     0     0     0     0     0     0     0     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]     1     0     0     0     0     1     1     1     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]     0     1     0     1     0     1     1     1     0     0     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]     1     1     0     1     1     1     1     0     0     0     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]     0     0     1     1     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]     0     0     0     0     0     0     0     0     0     2     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]     0     1     1     2     0     0     0     1     1     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]     0     0     1     0     0     0     0     0     0     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,26] [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]     1     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]     0     1     0     2     0     0     0     1     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]     0     1     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]     0     0     0     1     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]     1     0     0     0     1     0     0     0     1     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]     0     0     0     0     1     0     0     0     0     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]     0     2     0     0     0     0     0     1     0     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,38] [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,50] [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] [,61]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]     0     0     0     0     0     0     0     0     0     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]     1     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]     0     0     0     0     0     0     1     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,62] [,63] [,64] [,65] [,66] [,67] [,68] [,69] [,70] [,71] [,72] [,73]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,74] [,75] [,76] [,77] [,78] [,79] [,80] [,81] [,82] [,83] [,84] [,85]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]     0     0     0     0     1     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]     0     0     0     0     0     0     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,86] [,87] [,88] [,89] [,90] [,91]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]     0     0     0     0     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [ reached getOption("max.print") -- omitted 66 rows ]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Visualize midpoints of bins over u</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">binned_data</span><span class="op">$</span><span class="va">bins</span><span class="op">$</span><span class="va">midu</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]   23   53   83  113  143  173  203  233  263  293  323  353  383  413  443</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16]  473  503  533  563  593  623  653  683  713  743  773  803  833  863  893</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31]  923  953  983 1013 1043 1073 1103 1133 1163 1193 1223 1253 1283 1313 1343</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [46] 1373 1403 1433 1463 1493 1523 1553 1583 1613 1643 1673 1703 1733 1763 1793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [61] 1823 1853 1883 1913 1943 1973 2003 2033 2063 2093 2123 2153 2183 2213 2243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [76] 2273</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bin data over u = time at recurrence and s = time since recurrence, measured in day</span></span></span>
<span class="r-in"><span><span class="co"># individual-level data required</span></span></span>
<span class="r-in"><span><span class="co"># we provide two covariates: nodes (numerical) and rx (factor)</span></span></span>
<span class="r-in"><span><span class="va">covs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">reccolon2ts</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nodes"</span>, <span class="st">"rx"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">binned_data</span> <span class="op">&lt;-</span> <span class="fu">prepare_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  u <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">timer</span>, s_out <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">timesr</span>,</span></span>
<span class="r-in"><span>  events <span class="op">=</span> <span class="va">reccolon2ts</span><span class="op">$</span><span class="va">status</span>, ds <span class="op">=</span> <span class="fl">30</span>, individual <span class="op">=</span> <span class="cn">TRUE</span>, covs <span class="op">=</span> <span class="va">covs</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `s_in = NULL`. I will use `s_in = 0` for all observations.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `s_in = NULL`. I will use `s_in = 0` for all observations.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Visualize structure of binned data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">binned_data</span><span class="op">$</span><span class="va">bindata</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ R: num [1:76, 1:91, 1:461] 0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Y: num [1:76, 1:91, 1:461] 0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ Z: num [1:461, 1:3] 5 7 6 22 9 5 1 3 1 6 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : chr [1:3] "nodes" "Lev" "Lev+5FU"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Angela Carollo, Paul H.C. Eilers, Jutta Gampe.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

